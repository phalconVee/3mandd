
<footer id="footer"><!--Footer-->
    <div class="footer-top">
        <div class="container">
            <div class="row">
                <div class="col-sm-2">
                    <div class="companyinfo">
                        <h2><span>3m&amp;d</span>.ng</h2>
                        <p>Welcome to 3m&amp;d.ng, the no. 1 alcoholic and non-alcoholic online shopping mall in Nigeria.</p>
                    </div>
                </div>
                <div class="col-sm-7">
                    <div class="col-sm-3">
                        <div class="video-gallery text-center">
                            <a href="#">
                                <div class="iframe-img">
                                    <img src="<?=base_url();?>assets/theme/images/home/dist1.png" alt="" />
                                </div>
                                <div class="overlay-icon">
                                    <i class="fa fa-play-circle-o"></i>
                                </div>
                            </a>
                            <p>Onome Stores</p>
                            <h2>Distributor (Benin)</h2>
                        </div>
                    </div>

                    <div class="col-sm-3">
                        <div class="video-gallery text-center">
                            <a href="#">
                                <div class="iframe-img">
                                    <img src="<?=base_url();?>assets/theme/images/home/dist2.png" alt="" />
                                </div>
                                <div class="overlay-icon">
                                    <i class="fa fa-play-circle-o"></i>
                                </div>
                            </a>
                            <p>Ifeomachukwuka Ltd</p>
                            <h2>Distributor (PHC)</h2>
                        </div>
                    </div>

                    <div class="col-sm-3">
                        <div class="video-gallery text-center">
                            <a href="#">
                                <div class="iframe-img">
                                    <img src="<?=base_url();?>assets/theme/images/home/iframe4.png" alt="" />
                                </div>
                                <div class="overlay-icon">
                                    <i class="fa fa-play-circle-o"></i>
                                </div>
                            </a>
                            <p>Madam Sikira</p>
                            <h2>Distributor (Ijebu)</h2>
                        </div>
                    </div>

                    <div class="col-sm-3">
                        <div class="video-gallery text-center">
                            <a href="#">
                                <div class="iframe-img">
                                    <img src="<?=base_url();?>assets/theme/images/home/dist3.png" alt="" />
                                </div>
                                <div class="overlay-icon">
                                    <i class="fa fa-play-circle-o"></i>
                                </div>
                            </a>
                            <p>Aliyu Express</p>
                            <h2>Distributor (Kaduna)</h2>
                        </div>
                    </div>
                </div>
                <div class="col-sm-3">
                    <div class="address">
                        <img src="<?=base_url();?>assets/theme/images/home/map.png" alt="" />
                        <p>23 Acme Road, Ogba-Ikeja, LA(Lagos)</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="footer-widget">
        <div class="container">
            <div class="row">
                <div class="col-sm-2">
                    <div class="single-widget">
                        <h2>Service</h2>
                        <ul class="nav nav-pills nav-stacked">
                            <li><a href="#">Online Help</a></li>
                            <li><a href="#">Contact Us</a></li>
                            <li><a href="#">Order Status</a></li>
                            <li><a href="#">Change Location</a></li>
                            <li><a href="#">FAQ’s</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-sm-2">
                    <div class="single-widget">
                        <h2>Quick Shop</h2>
                        <ul class="nav nav-pills nav-stacked">
                            <li><a href="#">Lager</a></li>
                            <li><a href="#">Stout</a></li>
                            <li><a href="#">Malt</a></li>
                            <li><a href="#">Ciders</a></li>
                            <li><a href="#">Energy Drinks</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-sm-2">
                    <div class="single-widget">
                        <h2>Policies</h2>
                        <ul class="nav nav-pills nav-stacked">
                            <li><a href="#">Terms of Use</a></li>
                            <li><a href="#">Privecy Policy</a></li>
                            <li><a href="#">Refund Policy</a></li>
                            <li><a href="#">Billing System</a></li>
                            <li><a href="#">Ticket System</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-sm-2">
                    <div class="single-widget">
                        <h2>About Us</h2>
                        <ul class="nav nav-pills nav-stacked">
                            <li><a href="#">Company Information</a></li>
                            <li><a href="#">Careers</a></li>
                            <li><a href="#">Store Location</a></li>
                            <li><a href="#">Affillate Program</a></li>
                            <li><a href="#">Copyright</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-sm-3 col-sm-offset-1">
                    <div class="single-widget">
                        <h2>Newsletter</h2>
                        <form action="#" class="searchform">
                            <input type="text" placeholder="Your email address" />
                            <button type="submit" class="btn btn-default"><i class="fa fa-arrow-circle-o-right"></i></button>
                            <p>Get the most recent updates from <br />our site and be updated your self...</p>
                        </form>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <div class="footer-bottom">
        <div class="container">
            <div class="row">
                <p class="pull-left">Copyright © 2016 <a href="../">3m&amp;d.ng</a> - <a href="../">Sitemap</a>.</p>

            </div>
        </div>
    </div>

</footer><!--/Footer-->



<script src="<?=base_url();?>assets/theme/js/jquery.js"></script>
<script src="<?=base_url();?>assets/theme/js/bootstrap.min.js"></script>
<script src="<?=base_url();?>assets/theme/js/jquery.scrollUp.min.js"></script>
<script src="<?=base_url();?>assets/theme/js/price-range.js"></script>
<script src="<?=base_url();?>assets/theme/js/jquery.prettyPhoto.js"></script>
<script src="<?=base_url();?>assets/theme/js/main.js"></script>
<script src="<?=base_url()?>assets/theme/bootstrap-datepicker/js/bootstrap-datepicker.min.js"></script>

<script>

    // To conform clear all data in cart.
    function clear_cart() {
        var result = confirm('Are you sure want to clear all items in cart?');

        var url;

        if (result) {
            url = "<?php echo site_url('ajax_controller/clear_cart/all')?>";
        } else {
            return false; // cancel button
        }

        $.ajax({
            type: 'POST',
            url: url,
            success:function(response){
                $("#cart_container").html(response);
                $("#myModal_cart").modal('show');
            }
        });
    }

    function remove_cart(itemid)
    {
        $.ajax({
            type: 'POST',
            url: '<?php echo site_url("ajax_controller/remove_cart/'+itemid+'")?>',
            data: { id:itemid },
            success:function(response){
                $("#cart_container").html(response);
                $("#myModal_cart").modal('show');
            }
        });

    }

    function update_cart(itemid)
    {
        var qty= document.getElementById(itemid+"_qty").value;
        $.ajax({
            type: 'POST',
            url: '<?php echo site_url("ajax_controller/update_cart/'+itemid+'/'+qty+'")?>',
            data: { id:itemid },
            success:function(response){
                $("#cart_container").html(response);
                $("#myModal_cart").modal('show');
            }
        });
    }

    var pid="";
    $(document).ready(function() {

        $(".view_cart").click(function(event) {

            $.ajax({
                type: 'POST',
                url: '<?php echo site_url("ajax_controller/view_cart")?>',
                data: { id:'1' },
                success:function(response){
                    $("#cart_container").html(response);
                    $("#myModal_cart").modal('show');
                }
            });/* Ajax */

        });


        $(".add-to-cart").click(function(event) {

            var id = $(this).data('id');
            $("#item_qty_"+id).css("border-color","");
            $("#item_r_qty_"+id).css("border-color","");
            var qty = $("#item_qty_"+id).val();
            var return_qty = $("#item_r_qty_"+id).val();
            if(qty=="")
            {
                $("#item_qty_"+id).css("border-color","red");
                return;
            }
            if(return_qty=="")
            {
                $("#item_r_qty_"+id).css("border-color","red");
                return;
            }

            $.ajax({
                type: 'POST',
                url: '<?php echo site_url("ajax_controller/add_cart_item/'+id+'/'+qty+'/'+return_qty+'")?>',
                data: { id:id },
                success:function(response){
                    $("#total_items").html(response);
                    $(".view_cart").click();
                }
            });/* Ajax */

        });/* Add to cart clicked */

    });/*document */


</script>


<script type="text/javascript">
    $(document).ready(function() {
        $("#statesdrp").change(function(){
            $.ajax({
                type: "POST",
                url:  '<?php echo site_url("ajax_controller/populateLGA")?>',
                data: {id: $(this).val()},
                success: function(data){
                    $("#localsDrop").html(data);
                }

            });

        });
    });

</script>

<script type="text/javascript">

    var save_method; //for save method string

    $(document).ready(function() {

        //datepicker
        $('.datepicker').datepicker({
            autoclose: true,
            startDate: '-0m',
            format: "yyyy-mm-dd",
            todayHighlight: true,
            orientation: "top auto",
            todayBtn: true,
            todayHighlight: true,
        });

        //set input/textarea/select event when change value, remove class error and remove text help block
        $("input").change(function(){
            $(this).parent().parent().removeClass('has-error');
            $(this).next().empty();
        });
        $("textarea").change(function(){
            $(this).parent().parent().removeClass('has-error');
            $(this).next().empty();
        });
        $("select").change(function(){
            $(this).parent().parent().removeClass('has-error');
            $(this).next().empty();
        });

    });

    function add_new_address()
    {
        save_method = 'add';
        $('#forms')[0].reset(); // reset form on modals
        $('.form-group').removeClass('has-error'); // clear error class
        $('.help-block').empty(); // clear error string
        $('#myNew_address').modal('show'); // show bootstrap modal
        $('.modal-title').text('Add New Address'); // Set Title to Bootstrap modal title

    }

    function save()
    {
        save_method = 'add';
       /* $('#forms')[0].reset(); // reset form on modals
        $('.form-group').removeClass('has-error'); // clear error class
        $('.help-block').empty(); // clear error string*/

        $('#btnSave').text('SAVING...'); //change button text
        $('#btnSave').attr('disabled',true); //set button disable
        var url;

        if(save_method == 'add') {
            url = "<?php echo site_url('login/ajax_add_address_book')?>";
        }
        // ajax adding data to database
        $.ajax({
            url : url,
            type: "POST",
            data: $('#forms').serialize(),
            dataType: "JSON",
            success: function(data)
            {
                if(data.status) //if success close modal and reload ajax table
                {
                    window.location.href = '<?php echo base_url()?>products/singlepagecheckout/';
                }
                else
                {
                    for (var i = 0; i < data.inputerror.length; i++)
                    {
                        $('[name="'+data.inputerror[i]+'"]').parent().parent().addClass('has-error'); //select parent twice to select div form-group class and add has-error class
                        $('[name="'+data.inputerror[i]+'"]').next().text(data.error_string[i]); //select span help-block class set text error string
                    }
                }
                $('#btnSave').text('SAVE & CONTINUE'); //change button text
                $('#btnSave').attr('disabled',false); //set button enable

            },
            error: function (jqXHR, textStatus, errorThrown)
            {
                alert('Error adding / update data');
                $('#btnSave').text('SAVE & CONTINUE'); //change button text
                $('#btnSave').attr('disabled',false); //set button enable

            }
        });
    }

    function edit_address_book(id)
    {
        save_method = 'update';
        $('#forms')[0].reset(); // reset form on modals
        $('.form-group').removeClass('has-error'); // clear error class
        $('.help-block').empty(); // clear error string

        //Ajax Load data from ajax
        $.ajax({
            url : "<?php echo site_url('login/edit_address/')?>/" + id,
            type: "GET",
            dataType: "JSON",
            success: function(data)
            {
                $('[name="address_id"]').val(data.address_id);
                $('[name="firstname"]').val(data.firstname);
                $('[name="lastname"]').val(data.lastname);
                $('[name="address"]').val(data.address);
                $('[name="telephone"]').val(data.telephone);
                $('[name="state"]').val(data.state);
                $('[name="lga"]').val(data.lga);
                $('#modal_form').modal('show'); // show bootstrap modal when complete loaded
                $('.modal-title').text('Edit Address Book'); // Set title to Bootstrap modal title

            },
            error: function (jqXHR, textStatus, errorThrown)
            {
                alert('Error getting data from ajax');
            }
        });
    }

    function editsave()
    {
        save_method = 'update';
         /*$('#forms')[0].reset(); // reset form on modals
         $('.form-group').removeClass('has-error'); // clear error class
         $('.help-block').empty(); // clear error string*/

        $('#btnSave').text('SAVING...'); //change button text
        $('#btnSave').attr('disabled',true); //set button disable
        var url;

        if(save_method == 'update') {
            url = "<?php echo site_url('login/ajax_update_address_book')?>";
        }

        // ajax adding data to database
        $.ajax({
            url : url,
            type: "POST",
            data: $('#forms').serialize(),
            dataType: "JSON",
            success: function(data)
            {
                if(data.status) //if success close modal and reload ajax table
                {
                    //window.location.href = '<?php echo base_url()?>products/singlepagecheckout/' + encodeURIComponent(data.address_id)
                    window.location.href = '<?php echo base_url()?>products/singlepagecheckout/';
                }
                else
                {
                    for (var i = 0; i < data.inputerror.length; i++)
                    {
                        $('[name="'+data.inputerror[i]+'"]').parent().parent().addClass('has-error'); //select parent twice to select div form-group class and add has-error class
                        $('[name="'+data.inputerror[i]+'"]').next().text(data.error_string[i]); //select span help-block class set text error string
                    }
                }
                $('#btnSave').text('SAVE & CONTINUE'); //change button text
                $('#btnSave').attr('disabled',false); //set button enable

            },
            error: function (jqXHR, textStatus, errorThrown)
            {
                alert('Error adding / update data');
                $('#btnSave').text('SAVE & CONTINUE'); //change button text
                $('#btnSave').attr('disabled',false); //set button enable

            }
        });
    }

    function delete_address_book(id)
    {
        if(confirm('Are you sure to delete this data?'))
        {
            // ajax delete data to database
            $.ajax({
                url : "<?php echo site_url('login/ajax_delete_address_book')?>/"+id,
                type: "POST",
                dataType: "JSON",
                success: function(data)
                {
                    //if success reload ajax table
                    $('#modal_form').modal('hide');
                    reload_table();
                },
                error: function (jqXHR, textStatus, errorThrown)
                {
                    alert('Error deleting data');
                }
            });

        }
    }

    function use_address(id_address, type)
    {
        // id = address id
        // type = 2 =  if is set, is an approval to move to order summary
        $('#btnUse').text('LOADING...'); //change button text
        $('#btnUse').attr('disabled',true); //set button disable
        $.ajax({
            type: "POST",
            url: domain+"singlepagecheckout",
            data: "id_address="+id_address+"&type="+type,
            cache: false,
            success: function(data)
            {
               window.location.href = '<?php echo base_url('singlepagecheckout');?>?id_address='+ id_address+'&type='+type
            }
            //success: function (data) { $('body').prepend(data); }
        });

    }

    function proceed_2_pay(id_address, type)
    {
        if(document.getElementById('bc').checked) {
            var host = document.getElementById("bc").value;
        }else{
            var host = document.getElementById("bc").value='';
        }

        if(document.getElementById('date').value == "" || document.getElementById('date').value == null) {
            alert("You didn't specify your preferred date of delivery date.");
            return false;
        }else{
            var date = document.getElementById("date").value;
        }

        var item_name       = document.getElementById("item_name").value;
        var total_cart_qty  = document.getElementById("total_cart_qty").value;
        var empty_qty       = document.getElementById("empty_qty").value;
        var empty_ret_qty   = document.getElementById("empty_ret_qty").value;
        var empty_value     = document.getElementById("empty_value").value;
        var full_value      = document.getElementById("full_value").value;
        var total_value     = document.getElementById("total_value").value;
        var empty_ret_value = document.getElementById("empty_ret_value").value;
        var balance_to_pay  = document.getElementById("balance_to_pay").value;
        var unit_type       = document.getElementById("unit_type").value;
        var pro_qty         = document.getElementById("pro_qty").value;

        $('#btnUse').text('LOADING...'); //change button text
        $('#btnUse').attr('disabled',true); //set button disable
        $.ajax({
            type: "POST",
            url: domain+"singlepagecheckout/pay",
            data: "id_address="+id_address+"&type="+type+"&crate="+"&host="+host+"&date="+date+"&balance_to_pay="+balance_to_pay+"&total_cart_qty="+total_cart_qty+"&item_name="+item_name+"&empty_qty="+empty_qty+"&empty_ret_qty="+empty_ret_qty+"&empty_value="+empty_ret_value+"&full_value="+full_value+"&total_value="+total_value+"&empty_ret_value="+empty_ret_value+"&unit_type="+unit_type+"&pro_qty="+pro_qty,
            dataType: "JSON",
            cache: false,
            success: function(data)
            {
                window.location.href = '<?php echo base_url();?>singlepagecheckout?id_address=' + encodeURIComponent(data.address_id) + '&type=' +
                    encodeURIComponent(data.type) + '&item_name=' + encodeURIComponent(data.item_name) + '&balance_to_pay=' +
                    encodeURIComponent(data.balance_to_pay) + '&total_cart_qty=' + encodeURIComponent(data.total_cart_qty) + '&empty_qty=' +
                    encodeURIComponent(data.empty_qty) + '&host_charge=' + encodeURIComponent(data.host_charge) + '&invoice_no='+
                    encodeURIComponent(data.invoice_no) + '&empty_ret_qty=' + encodeURIComponent(data.empty_ret_qty) + '&full_value='+
                    encodeURIComponent(data.full_value) + '&host_service=' + encodeURIComponent(data.host_service) + '&total_value='+
                    encodeURIComponent(data.total_value) + '&delivery_date=' + encodeURIComponent(data.delivery_date) + '&empty_ret_value='+
                    encodeURIComponent(data.empty_ret_value) + '&unit_type=' + encodeURIComponent(data.unit_type) + '&pro_qty='+
                    encodeURIComponent(data.pro_qty)
            }
        });
    }

</script>


<!--modal display for cart/checkout-->
<div class="modal fade" id="myModal_cart" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title" id="myModalLabel">My cart</h4>
            </div>
            <div class="modal-body" id="cart_container">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <a type="button" href="<?php echo site_url("singlepagecheckout"); ?>" class="btn btn-primary">Check out</a>
            </div>
        </div>
    </div>
</div>
<!--end modal-->

<!-- Bootstrap modal for editing address book -->
<div class="modal fade" id="modal_form" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h3 class="modal-title">Person Form</h3>
            </div>
            <div class="modal-body form">
                <form action="#" id="forms" class="form-horizontal">
                    <input type="hidden" value="" name="address_id"/>
                    <div class="form-body">
                        <div class="form-group">
                            <label class="control-label col-md-3">First Name</label>
                            <div class="col-md-9">
                                <input name="firstname" placeholder="First Name" class="form-control" type="text"/>
                                <span class="help-block"></span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3">Last Name</label>
                            <div class="col-md-9">
                                <input name="lastname" placeholder="Last Name" class="form-control" type="text"/>
                                <span class="help-block" id="user-result"></span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3">Telephone</label>
                            <div class="col-md-9">
                                <input name="telephone" placeholder="Telephone" class="form-control" type="text"/>
                                <span class="help-block"></span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3">State</label>
                            <div class="col-md-9">

                                <?php echo form_dropdown('state', $drop_states, '', 'id="statesdrp" ');  ?>

                                <span class="help-block"></span>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="control-label col-md-3">L.G.A</label>
                            <div class="col-md-9">

                                <?php echo form_dropdown('lga', $drop_lga, '', 'id="localsDrop" ');  ?>

                                <span class="help-block"></span>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="control-label col-md-3">Address</label>
                            <div class="col-md-9">
                                <textarea name="address"  placeholder="Your place of residence or billing address" rows="6"></textarea>
                                <span class="help-block"></span>
                            </div>
                        </div>


                </form>
            </div>
            <div class="modal-footer">
                <button type="button" id="btnSave" onclick="editsave()" class="btn btn-primary">Save</button>
                <button type="button" class="btn btn-danger" data-dismiss="modal">Cancel</button>
            </div>
        </div>
    </div>
</div>
<!-- End Bootstrap modal for edit Address Book-->

<!-- Bootstrap modal for editing address book -->
<div class="modal fade" id="myNew_address" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title" id="myModalLabel">My cart</h4>
            </div>
            <div class="modal-body">
                <form action="#" id="forms" class="form-horizontal">
                    <input type="hidden" name="usr_id" value="<?=$_SESSION['w3_user_id']?>" />
                    <div class="form-body">
                        <div class="form-group">
                            <label class="control-label col-md-3">First Name</label>
                            <div class="col-md-9">
                                <input name="firstname" placeholder="First Name" class="form-control" type="text"/>
                                <span class="help-block"></span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3">Last Name</label>
                            <div class="col-md-9">
                                <input name="lastname" placeholder="Last Name" class="form-control" type="text"/>
                                <span class="help-block" id="user-result"></span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3">Telephone</label>
                            <div class="col-md-9">
                                <input name="telephone" placeholder="Telephone" class="form-control" type="text"/>
                                <span class="help-block"></span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3">State</label>
                            <div class="col-md-9">

                                <?php echo form_dropdown('state', $drop_states, '', 'id="statesdrp" ');  ?>

                                <span class="help-block"></span>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="control-label col-md-3">L.G.A</label>
                            <div class="col-md-9">

                                <?php echo form_dropdown('lga', $drop_lga, '', 'id="localsDrop" ');  ?>

                                <span class="help-block"></span>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="control-label col-md-3">Address</label>
                            <div class="col-md-9">
                                <textarea name="address"  placeholder="Your place of residence or billing address" rows="6"></textarea>
                                <span class="help-block"></span>
                            </div>
                        </div>


                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">CLOSE</button>
                <a type="button" href="<?php echo site_url("products/singlepagecheckout"); ?>" class="btn btn-primary">SAVE & CONTINUE</a>
            </div>
        </div>
    </div>
</div>
<!-- End Bootstrap modal for edit Address Book-->